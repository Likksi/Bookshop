(()=>{"use strict";let t=0;function e(){let e="BOOKS";const{cartButtonElement:n}=function(){const n=document.createElement("header");n.classList.add("header");const o=document.createElement("div");o.classList.add("logo"),o.textContent="Bookshop";const a=document.createElement("div");a.classList.add("header-nav");const i=document.createElement("nav");i.classList.add("header-nav-navigation");const r=document.createElement("ul");r.classList.add("nav-navigation-links"),["BOOKS","AUDIOBOOKS","STATIONERY & GIFTS","BLOG"].forEach((t=>{const n=document.createElement("li");n.classList.add("navigation-link");const o=document.createElement("a");o.href="#",o.textContent=t,o.setAttribute("data-category",t),t===e&&o.classList.add("active"),o.addEventListener("click",(function(n){n.preventDefault(),function(t){const e=r.querySelector(".navigation-link a.active");e&&e.classList.remove("active");const n=r.querySelector(`.navigation-link a[data-category="${t}"]`);n&&n.classList.add("active")}(t),e=t})),n.appendChild(o),r.appendChild(n)})),i.appendChild(r),a.appendChild(i);const c=document.createElement("div");c.classList.add("set-buttons");const s=document.createElement("a");s.classList.add("set-button"),s.href="#",s.innerHTML='<img src="images/svg/user.svg" alt="User">',c.appendChild(s);const l=document.createElement("a");l.classList.add("set-button"),l.href="#",l.innerHTML='<img src="images/svg/search.svg" alt="Search">',c.appendChild(l);const d=document.createElement("a");return d.classList.add("set-button","cart-icon"),d.href="#",d.innerHTML=`\n            <img src="images/svg/shopbag.svg" alt="Shopbag">\n            <div class="cart-badge">${t}</div>\n        `,d.addEventListener("click",(function(t){t.preventDefault()})),c.appendChild(d),n.appendChild(o),n.appendChild(a),n.appendChild(c),document.body.insertBefore(n,document.body.firstChild),{cartButtonElement:d}}();return document.addEventListener("DOMContentLoaded",(function(){const e=JSON.parse(localStorage.getItem("cart"))||[];if(t=e.length,n.querySelector(".cart-badge").textContent=t>0?t:"",t>0){const t=document.querySelector(".cart-icon");t&&t.addEventListener("click",(function(t){t.preventDefault()}))}})),{updateCartBadge:()=>{const e=document.querySelector(".cart-icon .cart-badge");e&&(e.textContent=t>0?t:"",e.style.display=t>0?"block":"none")}}}function n(t,e,n){let o,a=0;function i(){o=setInterval((()=>{a=(a+1)%t.length,r(a)}),5e3)}function r(t){clearInterval(o),a=t,document.querySelector(".image.active").classList.remove("active"),document.querySelector(`.image.n${t}`).classList.add("active"),function(t){document.querySelectorAll(".slider-dots-item").forEach((t=>{t.classList.remove("active")}));document.querySelector(`.slider-dots-item.n${t}`).classList.add("active")}(t),i()}e.innerHTML="",t.forEach(((n,o)=>{let a=t[o].title,i=t[o].url||"",r=`<div class="image n${o} ${0===o?"active":""}" data-index="${o}" style="${i?`background-image:url(${i});`:"background-color: #ccc; color: #fff; display: flex; align-items: center; justify-content: center;"}">\n                  <img src="${i}" alt="${a}">\n                  ${i?"":"No Image"}\n                </div>`;e.innerHTML+=r})),n.innerHTML="",t.forEach(((t,e)=>{let o=`<div class="slider-dots-item n${e} ${0===e?"active":""}" data-index="${e}"></div>`;n.innerHTML+=o})),n.addEventListener("click",(function(t){t.target.classList.contains("slider-dots-item")&&r(parseInt(t.target.getAttribute("data-index")))})),i()}document.addEventListener("DOMContentLoaded",(function(){const t="AIzaSyB-Fn0Nf_MkamDRE-b3wyVCxaTKvXCTMS8";let o=[],a=0,i=0;const r=6;let c;document.querySelector(".cart-badge");const s=document.querySelector(".content-book-cards"),l=document.querySelector(".slider-images"),d=document.querySelector(".slider-dots");let u=[{url:"images/jpg/banner1.jpg",title:"Black friday sale"},{url:"images/jpg/banner2.jpg",title:"Top 10 books"},{url:"images/jpg/banner3.jpg",title:"Check out"}];function g(e,n,o){return e?fetch(`https://www.googleapis.com/books/v1/volumes?q=subject:${e}&key=${t}&printType=books&startIndex=${n}&maxResults=${o}&langRestrict=en`).then((t=>{if(!t.ok)throw new Error("Network response was not ok");return t.json()})).then((t=>t.items?t.items.map((t=>function(t){const e=t.volumeInfo||{},n=t.saleInfo||{};return{img:(e.imageLinks||{}).thumbnail||'data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 192" width="128" height="192"%3E%3Crect width="100%" height="100%" fill="%23ccc" /%3E%3Ctext x="50%" y="50%" font-size="16" dy=".3em" fill="%23fff" text-anchor="middle"%3ENo image%3C/text%3E%3C/svg%3E',title:e.title||"No Title",authors:e.authors?e.authors.join(", "):"No Author",averageRating:e.averageRating||0,ratingsCount:e.ratingsCount||0,description:e.description||"",saleInfo:n.listPrice?`$${n.listPrice.amount}`:""}}(t))):[])).catch((t=>(console.error("Error fetching books data:",t),[]))):Promise.resolve([])}function m(){let t=document.querySelector(".content-book-cards");t.innerHTML="";for(let n=0;n<o.length;n++){let a=o[n],i=document.createElement("div");i.classList.add("book-card");let r=v(a)?"book-cart-btn":"buy-now-btn";i.innerHTML=`\n                <img src="${a.img}" alt="${a.title}">\n                <div class="book-info">\n                    <div class="book-authors">${a.authors}</div>\n                    <div class="book-title">${a.title}</div>\n                    <div class="star-rating">\n                        ${f(a.averageRating)}\n                        <div class="book-ratings">${e=a.ratingsCount,!e||isNaN(e)?"":e>=1e6?`${(e/1e6).toFixed(1)}M review`:e>=1e3?`${(e/1e3).toFixed(1)}K review`:`${e} review`}</div>\n                    </div>\n                    <div class="book-description">${a.description}</div>\n                    ${a.saleInfo?`<div class="book-price">${a.saleInfo}</div>`:""}\n                    <button class="${r}" data-book="${n}">\n                        ${v(a)?"IN THE CART":"BUY NOW"}\n                    </button>\n                </div>\n            `,t.appendChild(i)}var e;!function(){const t=document.querySelector(".load-more-btn");t&&t.remove();const e=document.createElement("button");e.classList.add("load-more-btn"),e.textContent="LOAD MORE",e.addEventListener("click",(function(){e.disabled||function(t){let e=i+r;g(t,e,r).then((function(t){if(t.length>0)o=[...o,...t],i=e,m();else{const t=document.querySelector(".load-more-btn");t&&t.remove()}})).catch((t=>{console.error("Error fetching books data:",t)}))}(c)})),s.appendChild(e)}()}function v(t){return(JSON.parse(localStorage.getItem("cart"))||[]).some((e=>e.title===t.title&&e.authors===t.authors))}function f(t){if(!t)return"";const e=Math.round(t),n=5-e;return Array.from({length:e},((t,e)=>'<div class="star filled-star"></div>')).concat(Array.from({length:n},((t,e)=>'<div class="star"></div>'))).join("")}n(u,l,d),e();let h=document.querySelectorAll(".aside-link");function b(){const t=document.querySelector(".cart-badge");t&&(a>0?(t.textContent=a,t.style.display="block"):t.style.display="none")}h.forEach((function(t){t.addEventListener("click",(function(e){e.preventDefault(),h.forEach((function(t){t.classList.remove("active")})),t.classList.add("active");let n=t.dataset.category;c=n,g(n,0,6).then((function(t){o=t,m()}))}))})),function(){const t=document.querySelector(".aside-link");t&&t.click()}(),document.addEventListener("click",(function(t){(t.target.classList.contains("buy-now-btn")||t.target.classList.contains("book-cart-btn"))&&function(t){try{let e=t.target;if("BUTTON"!==e.tagName)return;let n=e.getAttribute("data-book");if(null==n||isNaN(n))return void console.error("Error handling click: Invalid book index");let i=o[n];if(!i||!i.title||!i.authors)return void console.error("Error handling click: Book, title, or authors are undefined",i);let r=JSON.parse(localStorage.getItem("cart"))||[],c=r.find((t=>t.title===i.title&&t.authors===i.authors));c?(r=r.filter((t=>!(t.title===i.title&&t.authors===i.authors))),a--):(r.push({title:i.title,authors:i.authors,img:i.img||"",averageRating:i.averageRating||"",ratingsCount:i.ratingsCount||"",description:i.description||"",saleInfo:i.saleInfo||""}),a++),localStorage.setItem("cart",JSON.stringify(r)),m(),function(t,e){e?(t.classList.remove("buy-now-btn"),t.classList.add("book-cart-btn"),t.textContent="IN THE CART"):(t.classList.remove("book-cart-btn"),t.classList.add("buy-now-btn"),t.textContent="BUY NOW")}(e,!c),function(){let t=JSON.parse(localStorage.getItem("cart"))||[];a=t.length,b()}()}catch(t){console.error("Error handling click:",t)}}(t)})),n(u,l,d),b()}))})();